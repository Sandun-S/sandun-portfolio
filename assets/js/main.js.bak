document.addEventListener('DOMContentLoaded', function() {
    
    const headerHTML = `
        <div class="container navbar">
            <a href="index.html" class="logo">Sandun<span>.S</span></a>
            <nav>
                <ul class="nav-links" id="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <div class="nav-controls">
                <button class="theme-switcher" id="theme-switcher" aria-label="Toggle theme">
                    <span class="icon-sun">‚òÄÔ∏è</span>
                    <span class="icon-moon">üåô</span>
                </button>
                <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">‚ò∞</button>
            </div>
        </div>
    `;

    // FIXED: Added social media icons to the footer
    const footerHTML = `
        <div class="container footer-content">
            <div class="footer-socials">
                <a href="https://www.linkedin.com/in/sandun-siwantha" target="_blank" aria-label="LinkedIn">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14zm-11 6H5v10h3V9zm-1.5-2a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM18 9h-2.5a2.5 2.5 0 0 0-2.5 2.5V19h3v-5.5a.5.5 0 0 1 .5-.5h.5V19h3V11.5A2.5 2.5 0 0 0 18 9z"/></svg>
                </a>
                <a href="https://github.com/Sandun-S" target="_blank" aria-label="GitHub">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.5.5.09.68-.22.68-.48 0-.24-.01-1.02-.01-1.8-2.6.57-3.15-1.1-3.15-1.1-.45-1.15-1.11-1.46-1.11-1.46-.91-.62.07-.61.07-.61 1 .07 1.53 1.03 1.53 1.03.89 1.53 2.34 1.09 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94 0-1.1.39-1.99 1.03-2.69-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.4.1 2.65.64.7 1.03 1.59 1.03 2.69 0 3.84-2.33 4.68-4.56 4.93.36.31.68.92.68 1.85 0 1.34-.01 2.42-.01 2.75 0 .26.18.57.69.48C19.13 20.17 22 16.42 22 12c0-5.52-4.48-10-10-10z"/></svg>
                </a>
            </div>
            <p>&copy; ${new Date().getFullYear()} Sandun Siwantha. All rights reserved.</p>
        </div>
    `;
    
    function injectHTML(elementId, htmlContent, callback) {
        const element = document.getElementById(elementId);
        if (element) {
            element.innerHTML = htmlContent;
            if (callback) callback();
        }
    }

    function initializeHeader() {
        const menuToggle = document.getElementById('mobile-menu-toggle');
        const navLinks = document.getElementById('nav-links');
        if (menuToggle && navLinks) {
            menuToggle.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });
        }
        
        const currentPath = window.location.pathname.split("/").pop() || 'index.html';
        const navAnchors = document.querySelectorAll('#nav-links a');
        navAnchors.forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');
            }
        });
    }

    injectHTML('main-header', headerHTML, initializeHeader);
    injectHTML('main-footer', footerHTML);

});

